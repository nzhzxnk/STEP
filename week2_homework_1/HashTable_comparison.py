import pandas as pd
import matplotlib.pyplot as plt
import io

# Data for HashTable_1
data_1 = """
0 0.211110
1 0.389402
2 0.561643
3 0.736007
4 0.916840
5 1.111591
6 1.338951
7 1.585719
8 1.963091
9 2.480982
10 3.373154
11 4.272315
12 5.519355
13 6.831632
14 8.323012
15 9.852235
16 10.718235
17 12.756111
18 13.386770
19 15.524495
20 16.761326
21 17.293571
22 19.308010
23 20.720812
24 21.796502
25 22.815721
26 20.892565
27 25.502285
28 26.338030
29 26.937291
30 24.888432
31 30.844483
32 31.269241
33 28.836388
34 33.978998
35 30.592239
36 32.614169
37 37.000189
38 35.835199
39 35.268525
40 41.213141
41 33.071392
42 35.186871
43 42.560300
44 43.128719
45 47.416870
46 47.014186
47 48.586890
48 50.633027
49 46.672540
50 52.083964
51 53.847056
52 55.152806
53 56.193474
54 56.561371
55 57.640527
56 58.146392
57 60.442144
58 56.654197
59 63.689257
60 64.023534
61 64.685300
62 66.424904
63 68.323913
64 68.966904
65 70.871026
66 72.148128
67 72.464606
68 72.332983
69 75.237828
70 70.991077
71 77.847962
72 77.251363
73 77.653672
74 80.431994
75 81.282175
76 83.108947
77 85.137648
78 85.268104
79 83.494623
80 84.661698
81 87.356591
82 89.719527
83 90.597769
84 92.083813
85 93.448718
86 94.012827
87 93.067492
88 95.697894
89 98.165303
90 98.075584
91 99.143306
92 99.974025
93 100.926465
94 103.099114
95 101.214981
96 103.090706
97 106.706911
98 108.875614
99 107.363010
"""

# Data for HashTable_2
data_2 = """
0 0.103029
1 0.167331
2 0.226468
3 0.290443
4 0.451170
5 0.439451
6 0.591323
7 0.746730
8 0.784426
9 1.071424
10 1.408922
11 1.911684
12 2.352183
13 2.692618
14 3.257649
15 3.938788
16 4.395614
17 4.903342
18 4.908935
19 5.790589
20 6.043435
21 6.583637
22 7.042440
23 7.508603
24 8.016069
25 8.382018
26 9.005651
27 9.460289
28 9.264766
29 7.925213
30 5.760906
31 7.336508
32 11.563026
33 8.058742
34 12.319257
35 8.595804
36 11.539530
37 14.226369
38 14.745250
39 14.966057
40 15.436457
41 10.259016
42 8.372497
43 12.263175
44 10.391977
45 16.075582
46 10.301089
47 9.603241
48 10.519098
49 16.649464
50 19.510510
51 19.470840
52 19.261433
53 13.744855
"""

# Data for HashTable_3
data_3 = """
0 0.060584
1 0.058470
2 0.036598
3 0.083719
4 0.036423
5 0.039202
6 0.130725
7 0.036380
8 0.036697
9 0.039577
10 0.037200
11 0.039415
12 0.255421
13 0.036770
14 0.039385
15 0.037755
16 0.040274
17 0.037280
18 0.039357
19 0.037920
20 0.037760
21 0.039995
22 0.038102
23 0.039705
24 0.494031
25 0.039628
26 0.036920
27 0.039759
28 0.042158
29 0.037353
30 0.097199
31 0.037539
32 0.037242
33 0.039443
34 0.037719
35 0.039933
36 0.038042
37 0.038118
38 0.039859
39 0.038281
40 0.040184
41 0.038108
42 0.040087
43 0.038163
44 0.038290
45 0.040297
46 0.038370
47 0.040709
48 0.038284
49 1.246104
50 0.037027
51 0.040439
52 0.038139
53 0.038181
54 0.040363
55 0.037630
56 0.040192
57 0.037467
58 0.037661
59 0.040221
60 0.037492
61 0.181043
62 0.037877
63 0.037658
64 0.039606
65 0.037968
66 0.040002
67 0.037979
68 0.040115
69 0.038069
70 0.037797
71 0.040266
72 0.037935
73 0.040322
74 0.038346
75 0.038320
76 0.040133
77 0.038156
78 0.039855
79 0.038288
80 0.038315
81 0.040337
82 0.038209
83 0.040572
84 0.038191
85 0.040786
86 0.038659
87 0.038790
88 0.311283
89 0.038568
90 0.040366
91 0.038366
92 0.038684
93 0.040696
94 0.038879
95 0.040870
96 0.038927
97 0.038422
98 3.231835
99 0.039920
"""

# Data for HashTable_4
data_4 = """
0 0.092612
1 0.105932
2 0.109138
3 0.112664
4 0.117125
5 0.117727
6 0.121797
7 0.121735
8 0.128206
9 0.125004
10 0.128212
11 0.130480
12 0.129883
13 0.132182
14 0.130945
15 0.131767
16 0.134611
17 0.133998
18 0.136652
19 0.136201
20 0.137897
21 0.136607
22 0.136894
23 0.139731
24 0.138489
25 0.248817
26 0.142050
27 0.140612
28 0.142918
29 0.141483
30 0.145068
31 0.144443
32 0.143332
33 0.146495
34 0.144338
35 0.146076
36 0.147539
37 0.145195
38 0.148489
39 0.145902
40 0.148493
41 0.146581
42 0.149796
43 0.146986
44 0.147464
45 0.150631
46 0.148340
47 0.150850
48 0.149343
49 0.149031
50 0.152127
51 0.149981
52 0.480210
53 0.151896
54 0.151534
55 0.153946
56 0.151946
57 0.157992
58 0.153545
59 0.154896
60 0.153110
61 0.153443
62 0.155723
63 0.153102
64 0.155946
65 0.153833
66 0.154254
67 0.156789
68 0.154502
69 0.199981
70 0.155769
71 0.157970
72 0.155675
73 0.155637
74 0.158917
75 0.156489
76 0.158372
77 0.157104
78 0.157441
79 0.763878
80 0.157667
81 0.159420
82 0.157728
83 0.157259
84 0.160675
85 0.161038
86 0.160494
87 0.158813
88 0.159110
89 0.162155
90 0.159029
91 0.161483
92 0.159601
93 0.161744
94 0.159981
95 0.159574
96 0.162718
97 0.160551
98 0.162825
99 0.161190
"""

# Read the data into pandas DataFrames
df1 = pd.read_csv(io.StringIO(data_1), sep="\\s+", names=['Index', 'Value'])
df2 = pd.read_csv(io.StringIO(data_2), sep="\\s+", names=['Index', 'Value'])
df3 = pd.read_csv(io.StringIO(data_3), sep="\\s+", names=['Index', 'Value'])
df4 = pd.read_csv(io.StringIO(data_4), sep="\\s+", names=['Index', 'Value'])

# Plotting
plt.figure(figsize=(12, 7))
marker_size = 4 # Reduced marker size

plt.plot(df1['Index'], df1['Value'], label='HashTable_1(Normal)', marker='o', linestyle='-', markersize=marker_size)
plt.plot(df2['Index'], df2['Value'], label='HashTable_2(Change hash function)', marker='s', linestyle='--', markersize=marker_size)
plt.plot(df3['Index'], df3['Value'], label='HashTable_3(Rehash)', marker='^', linestyle='-.', markersize=marker_size)
plt.plot(df4['Index'], df4['Value'], label='HashTable_4(AVL tree)', marker='d', linestyle=':', markersize=marker_size)

# Adding plot title and labels
plt.title('HashTable Performance Comparison', fontsize=16)
plt.xlabel('要素数/10000', fontsize=14) # Changed x-axis label
plt.ylabel('実行時間', fontsize=14) # Changed y-axis label
plt.xticks(rotation=45)
plt.legend(fontsize=12)
plt.grid(True, which='both', linestyle='--', linewidth=0.5)
plt.tight_layout()

# Save the plot to a file
plt.savefig('hashtable_comparison.png')